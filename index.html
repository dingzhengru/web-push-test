<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Web Push Test</title>
  </head>
  <body style="font-family: STHeiti">
    <h1>Web Push Test</h1>
    <p>參考: https://developers.google.com/web/fundamentals/codelabs/push-notifications?hl=zh-tw</p>
    <p>參考: https://github.com/web-push-libs/web-push</p>

    <h2>gcm sender id</h2>
    <p>創建 firebase 專案來取得</p>

    <h2>密鑰</h2>
    <p style="font-weight: bold">通常只會產生一次，就固定使用，因為一旦改掉，已訂閱的資訊就會沒用了</p>
    <p>需先啟動該專案的 server，npm start</p>
    <p>取得密鑰 => 取得訂閱資訊 => 將訂閱資訊傳給後端儲存</p>

    <span>Public Key</span>
    <p id="public-key"></p>

    <span>Private Key</span>
    <p id="private-key"></p>

    <h2>訂閱</h2>
    <p>檢查訂閱狀態 => 點下訂閱按鈕 => 訂閱 || 取消訂閱 => 後端紀錄訂閱資料(推送需要用到)</p>

    <button id="subscription" disabled>訂閱</button>

    <h2>推送</h2>
    <p>取得訂閱資訊(資料庫) => 推送訊息給指定訂閱者</p>
    <p>於 sw.js 設置接收推送事件</p>

    <button onclick="pushMessage()">推送訊息</button>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="api.js"></script>
    <script src="main.js"></script>
    <script></script>
  </body>
</html>
